@design_url: "https://cdn.jx3box.com/design/";
@jx3cxk: "@{design_url}event/jx3cxk/";
// 编辑器内
.e-audio {
    min-height: 24px;
    border-radius: 4px;
    font-size: 14px;
    width: 100%;
    box-sizing: border-box;
    background-color: #f1f8ff;
    border: 1px solid #c8e1ff;
    color: #62a9ff;

    line-height: 1.6 !important;
    padding: 10px;
    padding-right: 135px;
    font-family: Monaco, Consolas, "Lucida Console", "Courier New", serif;
    word-break: break-all;
    white-space: pre-wrap !important;
    overflow-wrap: break-word;

    .pr;
    &:after {
        content: "JX3BOX·AUDIO";
        position: absolute;
        right: 8px;
        top: 8px;
        background-color: darken(#c8e1ff, 20%);
        color: #fff;
        border-radius: 3px;
        padding: 2px 8px;
        line-height: 21px;
    }
}

// 渲染后的音频播放器样式
.w-audio-player {
    .pr;
    .r(24px);
    box-sizing: border-box;
    width: 376px;
    background: rgba(255, 255, 255, 0.1);
    transition: all 0.3s ease-in-out;
    padding: 24px;
    .m-item {
        .pr;
        .pointer;
        .r(16px);
        .clip;
        .mb(24px);
        color: #fff;
        padding: 32px 36px;
        box-sizing: border-box;
        width: 100%;
        background: linear-gradient(180deg, #7676f0 0%, #9495e9 100%);

        a {
            color: #fff;
            text-decoration: none;

            &:hover {
                text-decoration: none;
                box-shadow: none;
            }
        }

        img {
            padding: 0;
            margin: 0;
            border: none;
        }

        &::before {
            content: "";
            .pa;
            .lt(0);
            .tm(0);
            .size(100%);
            transition: opacity 0.3s ease-in-out;
            background: linear-gradient(180deg, #f9c27f 0%, #9697ed 100%);
        }
        .u-title {
            .flex;
            .pr;
            .bold;
            .fz(24px);
            .x;
            justify-content: center;
            align-items: center;
            max-width: 300px;
            box-sizing: border-box;
            font-family: "ALIMAMASHUHEITI";

            .clip {
                .clip;
                width: 100%;
            }

            .marquee-wrapper {
                white-space: nowrap;
                position: relative;
                display: inline-block;
                transition: transform 0s linear;

                &.marquee-animate {
                    animation: marquee linear infinite;
                    animation-fill-mode: forwards;
                }
            }

            .marquee-text {
                display: inline-block;

                &::after {
                    content: "》";
                    display: inline-block;
                }

                &::before {
                    content: "《";
                    display: inline-block;
                }

                &.copy {
                    margin-left: 180px;
                    display: none;

                    &::after,
                    &::before {
                        display: none;
                    }
                }
            }

            &.marquee-active {
                .marquee-text.copy {
                    display: inline-block;
                }

                .marquee-animate .marquee-text {
                    &::after,
                    &::before {
                        display: none;
                    }
                }

                &::after {
                    content: "》";
                    display: inline-block;
                    position: absolute;
                    right: -28px;
                    top: 50%;
                    transform: translateY(-50%);
                    z-index: 1;
                }

                &::before {
                    content: "《";
                    display: inline-block;
                    position: absolute;
                    left: -28px;
                    top: 50%;
                    transform: translateY(-50%);
                    z-index: 1;
                }
            }
        }
        .u-author {
            .x;
            .fz(14px);
            .tm(0.75);
            .mt(5px);
        }
        .m-record {
            .pr;
            padding: 42px 0 3px 0;
            .u-needle {
                .pa;
                .lt(50%,0);
                .size(120px,72px);
                .ml(-10px);
                user-select: none;
                pointer-events: none;
                transition: transform 0.3s ease-out, top 0.3s ease-out, margin 0.3s ease-out;
                transform-origin: 0% 0%;
                transform: rotate(0deg);
                &.isPlaying {
                    top: -3px;
                    margin: 0;
                    transform-origin: 0% 0%;
                    transform: rotate(30deg);
                    display: inline-block;
                }
            }
            .u-record {
                .db;
                .size(182px);
                .auto(x);
                user-select: none;
                padding: 28px;
                box-sizing: border-box;
                background: url("@{jx3cxk}web/item/record.svg") no-repeat center center;
                background-size: 100% 100%;
            }
            .u-avatar {
                .r(50%);
                .size(100%);
                object-fit: cover;
                transition: transform 0.6s ease-out;

                &.isRotate {
                    animation: rotate 6s linear infinite;
                    &.isPaused {
                        animation-play-state: paused;
                    }
                }
            }
        }
        .m-progress {
            .pr;
            margin: 16px 0;

            .u-progress-bar {
                .pr;
                height: 3px;
                background: rgba(65, 61, 82, 0.3);
                .r(3px);
                .pointer;
                overflow: visible;

                .u-progress-fill {
                    .pa;
                    height: 100%;
                    background: #fff;
                    .r(3px);
                    width: 0%;
                    transition: width 0.1s linear;
                }

                .u-progress-handle {
                    .pa;
                    top: 50%;
                    left: 0%;
                    .size(12px);
                    background: #fff;
                    border: 2px solid rgba(65, 61, 82, 0.3);
                    .r(50%);
                    transform: translate(-50%, -50%);
                    .pointer;
                    transition: left 0.1s linear;
                }
            }
        }
        .m-play {
            .pr;
            .flex;
            .pt(10px);
            flex-wrap: wrap;
            justify-content: space-between;
            align-items: center;
            .u-play-button {
                .flex;
                justify-content: space-between;
                width: 70%;
                box-sizing: border-box;
                margin: 0 15% 20px 15%;
                align-items: center;
            }
            .u-icon {
                .size(24px);
            }
            .u-play {
                .size(64px);
            }
            .u-like {
                .tm(0.75);
                .flex;
                align-items: center;
                gap: 5px;
                .u-icon {
                    .size(20px);
                }
            }
            .u-link {
                .tm(0.75);
                color: #fff;
            }
        }
    }
    &.play {
        .m-item {
            background: linear-gradient(180deg, #55c79f 0%, #9697ed 100%);
        }
    }
    &:hover {
        background: rgba(255, 255, 255, 0.15);
        .m-item::before {
            .tm(1);
        }
    }
}
@keyframes rotate {
    from {
        transform: rotate(0deg);
    }
    to {
        transform: rotate(360deg);
    }
}

@keyframes marquee {
    0% {
        transform: translateX(0);
    }
    100% {
        transform: translateX(-100%);
    }
}

// 渲染模式隐藏
.c-article-tinymce {
    .e-audio {
        display: none;
    }
}
// tinymce编辑器内展示
.c-article-editor {
    .e-audio {
        display: block;
    }
}
